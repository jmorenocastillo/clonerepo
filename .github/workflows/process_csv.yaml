name: Terraform Dummy - Manual Approval (Sin Environment)

on:
  push:
    branches: [ main ]

jobs:
  terraform:
    runs-on: ubuntu-latest
    permissions:
      issues: write  # Para el issue auto
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Plan
      id: plan
      run: |
        echo "=== 🗺️ TERRAFORM PLAN (Dummy) ==="
        echo "## Plan Details" >> $GITHUB_STEP_SUMMARY
        cat << 'EOF' >> $GITHUB_STEP_SUMMARY



    # ⏸️ PAUSA CON TRSTRINGER (FUNCIONA 100%)
    - name: ⏸️ Manual Approval Required
      if: github.ref == 'refs/heads/main'
      uses: trstringer/manual-approval@v1  # ← LA BUENA
      with:
        secret: ${{ github.TOKEN }}
        approvers: jmorenocastillo  # ← TU USERNAME
        minimum-approvals: 1
        timeout-minutes: 60
        issue-title: "🚀 Aprobar Terraform Apply (Dummy)"
        issue-body: |
          ## 🎭 Plan Listo para Revisar
          
          **Commit:** `${{ github.sha }}`
          **Run:** [Ver Logs](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})
          
          ### 📋 Detalles del Plan: