name: Terraform Dummy - Manual Approval sin Environment

on:
  push:
    branches: [ main ]

jobs:
  terraform:
    runs-on: ubuntu-latest
    permissions:
      issues: write  # Solo para crear el issue de aprobaci√≥n (autom√°tico)
    
    steps:
    - name: Checkout
      uses: actions/checkout@v4
    
    - name: Plan
      run: |
        echo "=== üó∫Ô∏è TERRAFORM PLAN (Dummy) ==="
        echo "## Plan Details" >> $GITHUB_STEP_SUMMARY
        cat << 'EOF' >> $GITHUB_STEP_SUMMARY


    # ‚è∏Ô∏è PAUSA CON ACTION DE TERCEROS (SIN ENVIRONMENT)
    - name: ‚è∏Ô∏è Manual Approval Required
      if: github.ref == 'refs/heads/main'
      uses: pavlospt/manual-approval@v1
      with:
        secret: ${{ github.TOKEN }}
        approvers: |  # Lista de usuarios (t√∫ o equipo, uno por l√≠nea)
          jmorenocastillo
        minimum-approvals: 1
        timeout-minutes: 60  # Expira en 1h si no apruebas
        issue-title: "üöÄ Aprobar Terraform Apply (Dummy - Sin Env)"
        issue-body: |
          ## üé≠ Plan Listo para Revisar
          
          **Commit:** `${{ github.sha }}`
          **Run:** [Ver Logs](https://github.com/${{ github.repository }}/actions/runs/${{ github.run_id }})
          
          ### üìã Detalles del Plan: